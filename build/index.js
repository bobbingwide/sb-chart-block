(window["sb-chart-block"]=window["sb-chart-block"]||[]).push([[1],{11:function(t,e,n){}}]),function(t){function e(e){for(var r,i,c=e[0],s=e[1],l=e[2],b=0,h=[];b<c.length;b++)i=c[b],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&h.push(o[i][0]),o[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);for(u&&u(e);h.length;)h.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},o={0:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var c=window["sb-chart-block"]=window["sb-chart-block"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=s;a.push([18,1]),n()}([function(t,e){t.exports=window.wp.element},function(t,e){t.exports=window.wp.i18n},function(t,e){t.exports=window.wp.components},function(t,e){t.exports=window.lodash},function(t,e){t.exports=window.wp.blockEditor},function(t,e){t.exports=window.wp.compose},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e){t.exports=window.wp.blocks},function(t,e,n){var r=n(14),o=n(15),a=n(16),i=n(17);t.exports=function(t){return r(t)||o(t)||a(t)||i()}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},,function(t,e){t.exports=window.wp.editor},function(t,e,n){},function(t,e,n){var r=n(6);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e,n){var r=n(6);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e,n){"use strict";n.r(e);var r=n(7),o=n(1),a=(n(11),n(0)),i=(n(12),n(4)),c=n(2),s=n(3),l=n(5),u=(n(13),n(8)),b=n.n(u),h=n(9),f=n.n(h),p=n(10),y=n.n(p),d=new Object({});d.Chart=["rgba( 247, 141, 167, 0.2 )","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],d.Gutenberg=["#F78DA7","#CF2E2E","#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#9B51E0","#EEEEEE","#ABB8C3","#313131","#FFFFFF"],d.Tertiary=["#F1E70D","#E42426","#2072B2","#FDC70F","#c31a7f","#1D96BB","#F28F1F","#6E398D","#0A905D","#EC6224","#424F9B","#8CBD3F"],d.Visualizer=["#3366CC","#DC3912","#FF9900","#109618","#990099","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC"];var g=new Map;function m(t){return g.get(t)}function v(t,e){var n=m(e);return n[(t-1)%n.length]}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}g.set("Chart",d.Chart),g.set("Gutenberg",d.Gutenberg),g.set("Tertiary",d.Tertiary),g.set("Visualizer",d.Visualizer),console.log(g);var j=n(3),C=function(){function t(){f()(this,t),console.log("constructor"),this.datasets=[],this.labels=[]}return y()(t,[{key:"setStuff",value:function(t){this.setLines(t.content),this.theme=t.theme,this.attributes=t,console.log(this.attributes)}},{key:"setLines",value:function(t){console.log(t),this.lines=t.split("\n"),console.log(this.lines),this.labels=this.lines.shift(),this.labels=this.labels.split(","),this.asMatrix(this.lines),this.series=this.transpose(this.matrix),console.log(this.series)}},{key:"asMatrix",value:function(t){this.matrix=[];var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return w(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.matrix.push(r.split(","))}}catch(t){n.e(t)}finally{n.f()}}},{key:"transpose",value:function(t){return j.zip.apply(j,b()(t))}},{key:"getLegend",value:function(t){return this.labels[t]}},{key:"getDataset",value:function(t){var e=new Object({});return e.label=this.getLegend(t),e.data=this.series[t],"pie"===this.attributes.type?e.backgroundColor=m(this.theme):(e.backgroundColor=v(t,this.theme),e.borderColor=function(t,e){return v(t,e)}(t,this.theme)),e.borderWidth=1,e.fill=!1,e}},{key:"getDatasets",value:function(){console.log(this.series);for(var t=[],e=1;e<this.series.length;e++)t.push(this.getDataset(e));return console.log(t),t}},{key:"getLabels",value:function(){return this.series[0]}},{key:"getOptions",value:function(){return"pie"==this.attributes.type?{maintainAspectRatio:!1}:{maintainAspectRatio:!1,scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}},{key:"showChart",value:function(t,e,n,r){var o=null;Chart.helpers.each(Chart.instances,(function(e){e.ctx===t&&(o=e)})),o&&o.destroy(),o=new Chart(t,{type:e,data:n,options:r})}},{key:"runChart",value:function(t){var e=document.getElementById(t.myChartId);if(e){this.setStuff(t),e=e.getContext("2d");var n={labels:this.getLabels(),datasets:this.getDatasets()},r=this.getOptions();return this.showChart(e,t.type,n,r)}}}]),t}(),O=Object(l.withInstanceId)((function(t){var e=t.attributes,n=(t.className,t.isSelected,t.setAttributes),r=t.instanceId,l="myChart-".concat(r);n({myChartId:l});var u=Object(o.__)("Choose Line, Bar, Horizontal bar or Pie.","sb-chart-block"),b={line:Object(o.__)("Line chart","sb-chart-block"),bar:Object(o.__)("Bar chart","sb-chart-block"),horizontalBar:Object(o.__)("Horizontal bar chart","sb-chart-block"),pie:Object(o.__)("Pie chart","sb-chart-block")},h=Object(s.map)(b,(function(t,e){return{value:e,label:t}})),f=Object(s.map)({Gutenberg:"Gutenberg palette",Chart:"Chart",Tertiary:"Chartist or Tertiary",Visualizer:"Visualizer"},(function(t,e){return{value:e,label:t}}));return Object(a.useEffect)((function(){e.content&&(new C).runChart(e)})),Object(a.createElement)(a.Fragment,null,Object(a.createElement)(i.BlockControls,null,Object(a.createElement)(c.ToolbarButton,{label:"Refresh",onClick:function(t){console.log(t)}},"Refresh")),Object(a.createElement)(i.InspectorControls,null,Object(a.createElement)(c.PanelBody,null,Object(a.createElement)(c.SelectControl,{label:Object(o.__)("Type","sb-chart-block"),value:e.type,onChange:function(t){console.log("Set type:"+t),n({type:t})},options:h,help:u})),Object(a.createElement)(c.PanelBody,null,Object(a.createElement)(c.SelectControl,{label:Object(o.__)("Theme","sb-chart-block"),value:e.theme,onChange:function(t){n({theme:t})},options:f}))),Object(a.createElement)("div",{className:"wp-block-sb-chart"},e.content&&Object(a.createElement)("div",{className:"chartjs"},Object(a.createElement)("canvas",{id:e.myChartId})),Object(a.createElement)(i.PlainText,{value:e.content,placeholder:Object(o.__)("Enter Chart data in CSV format"),onChange:function(t){t=t.replace(/<br>/g,"\n"),console.log(t),n({content:t})}}),!1))}));Object(r.registerBlockType)("oik-sb/chart",{title:Object(o.__)("Chart","sb-chart-block"),description:Object(o.__)("Display chart for the CSV content.","sb-chart-block"),category:"widgets",icon:"chart-line",keywords:[Object(o.__)("Chart","sb-chart-block"),Object(o.__)("Line","sb-chart-block"),Object(o.__)("Bar","sb-chart-block"),Object(o.__)("Horizontal bar","sb-chart-block"),Object(o.__)("Pie","sb-chart-block")],supports:{html:!1,align:!1},attributes:{type:{type:"string",default:"line"},content:{type:"string",default:""},theme:{type:"string",default:"Gutenberg"},myChartId:{type:"string",default:"myChart-"}},edit:O,save:function(t){var e=t.attributes;return console.log(e),Object(a.createElement)("div",{className:"chartjs"},Object(a.createElement)("canvas",{id:e.myChartId}))}})}]);