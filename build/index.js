(window["sb-chart-block"]=window["sb-chart-block"]||[]).push([[1],{12:function(e,t,n){}}]),function(e){function t(t){for(var r,i,c=t[0],l=t[1],s=t[2],b=0,h=[];b<c.length;b++)i=c[b],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&h.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);h.length;)h.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var l=n[c];0!==o[l]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={0:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window["sb-chart-block"]=window["sb-chart-block"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=l;a.push([19,1]),n()}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=window.lodash},function(e,t){e.exports=window.wp.blockEditor},function(e,t){e.exports=window.wp.primitives},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t){e.exports=window.wp.blocks},function(e,t){e.exports=window.wp.compose},function(e,t,n){var r=n(15),o=n(16),a=n(17),i=n(18);e.exports=function(e){return r(e)||o(e)||a(e)||i()}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},,function(e,t){e.exports=window.wp.editor},function(e,t,n){},function(e,t,n){var r=n(6);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t,n){var r=n(6);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";n.r(t);var r=n(7),o=n(1),a=(n(12),n(0)),i=(n(13),n(4)),c=n(2),l=n(3),s=n(8),u=(n(14),n(9)),b=n.n(u),h=n(10),f=n.n(h),p=n(11),d=n.n(p),g=new Object({});g.Chart=["rgba( 247, 141, 167, 0.2 )","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],g.Gutenberg=["#F78DA7","#CF2E2E","#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#9B51E0","#EEEEEE","#ABB8C3","#313131","#FFFFFF"],g.Tertiary=["#F1E70D","#E42426","#2072B2","#FDC70F","#c31a7f","#1D96BB","#F28F1F","#6E398D","#0A905D","#EC6224","#424F9B","#8CBD3F"],g.Visualizer=["#3366CC","#DC3912","#FF9900","#109618","#990099","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC"];var y=new Map;function v(e){return y.get(e)}function m(e,t){var n=v(t);return n[(e-1)%n.length]}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}y.set("Chart",g.Chart),y.set("Gutenberg",g.Gutenberg),y.set("Tertiary",g.Tertiary),y.set("Visualizer",g.Visualizer),console.log(y);var j=n(3),w=function(){function e(){f()(this,e),console.log("constructor"),this.datasets=[],this.labels=[]}return d()(e,[{key:"setStuff",value:function(e){this.setLines(e.content),this.theme=e.theme,this.attributes=e,console.log(this.attributes)}},{key:"setLines",value:function(e){console.log(e),this.lines=e.split("\n"),console.log(this.lines),this.labels=this.lines.shift(),this.labels=this.labels.split(","),this.asMatrix(this.lines),this.series=this.transpose(this.matrix),console.log(this.series)}},{key:"asMatrix",value:function(e){this.matrix=[];var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return O(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.matrix.push(r.split(","))}}catch(e){n.e(e)}finally{n.f()}}},{key:"transpose",value:function(e){return j.zip.apply(j,b()(e))}},{key:"getLegend",value:function(e){return this.labels[e]}},{key:"getDataset",value:function(e){var t=new Object({});return t.label=this.getLegend(e),t.data=this.series[e],"pie"===this.attributes.type?t.backgroundColor=v(this.theme):(t.backgroundColor=m(e,this.theme),t.borderColor=function(e,t){return m(e,t)}(e,this.theme)),t.borderWidth=1,t.fill=this.attributes.fill,t}},{key:"getDatasets",value:function(){for(var e=[],t=1;t<this.series.length;t++)e.push(this.getDataset(t));return console.log(e),e}},{key:"getLabels",value:function(){return this.series[0]}},{key:"getOptions",value:function(){var e=new Object({});if(e.maintainAspectRatio=!1,"pie"==this.attributes.type)return e;e.scales=new Object({}),e.scales.yAxes=[],e.scales.xAxes=[];var t=this.attributes.beginYAxisAt0,n=new Object({ticks:{beginAtZero:t}});return e.scales.yAxes.push(n),this.attributes.stacked&&(e.scales.yAxes[0].stacked=!0,e.scales.xAxes.push({stacked:!0})),e}},{key:"showChart",value:function(e,t,n,r){var o=null;Chart.helpers.each(Chart.instances,(function(t){t.ctx===e&&(o=t)})),o&&o.destroy(),o=new Chart(e,{type:t,data:n,options:r})}},{key:"runChart",value:function(e){var t=document.getElementById(e.myChartId);if(t){this.setStuff(e),t=t.getContext("2d");var n={labels:this.getLabels(),datasets:this.getDatasets()},r=this.getOptions();return this.showChart(t,e.type,n,r)}}}]),e}(),C=n(5),_=Object(a.createElement)(C.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},Object(a.createElement)(C.Path,{d:"M18 3.5c0 .62-.38 1.16-.92 1.38v13.11H1.99l4.22-6.73c-.13-.23-.21-.48-.21-.76C6 9.67 6.67 9 7.5 9S9 9.67 9 10.5c0 .13-.02.25-.05.37l1.44.63c.27-.3.67-.5 1.11-.5.18 0 .35.04.51.09l3.58-6.41c-.36-.27-.59-.7-.59-1.18 0-.83.67-1.5 1.5-1.5.19 0 .36.04.53.1l.05-.09v.11c.54.22.92.76.92 1.38zm-1.92 13.49V5.85l-3.29 5.89c.13.23.21.48.21.76 0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5l.01-.07-1.63-.72c-.25.18-.55.29-.88.29-.18 0-.35-.04-.51-.1l-3.2 5.09h12.29z"})),k=Object(a.createElement)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(a.createElement)(c.Path,{fillRule:"evenodd",d:"m3 18v-11h3v11v0h-3m5 0v-9h3v9h-3m5 0v-13v0h3v13h-3",clipRule:"evenodd"})),x=Object(a.createElement)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(a.createElement)(c.Path,{fillRule:"evenodd",d:"M2 3H12V6H2H2V3M2 8H10V11H2V8M2 13H15V16H2V13"})),E=Object(a.createElement)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(a.createElement)(c.Path,{d:"M 9.5626743,8.46667 H 18.029337 A 8.4263424,8.4666865 0 0 0 9.6029683,0 8.4263424,8.4666865 0 0 0 9.5626783, 1.0700004e-4 Z M 8.4716429,1.0583348 A 8.4666704,8.4666723 0 0 0 1.4954554e-6, 9.5199618 8.4666704,8.4666723 0 0 0 8.4616259,17.991664 8.4666704,8.4666723 0 0 0 16.933333,9.5299798 a 8.4666704, 8.4666723 0 0 0 -8.7e-5,-0.04049 l -8.4665871,-0.005 z"})),A=[{icon:_,title:Object(o.__)("Line chart"),type:"line"},{icon:k,title:Object(o.__)("Bar chart"),type:"bar"},{icon:x,title:Object(o.__)("Horizontal bar chart","sb-chart-block"),type:"horizontalBar"},{icon:E,title:Object(o.__)("Pie chart"),type:"pie"}],B={position:"bottom right",isAlternate:!0};function S(e){var t=e.value,n=e.onChange,r=e.typeControls,i=void 0===r?A:r,s=e.label,u=void 0===s?Object(o.__)("Chart type"):s,b=e.describedBy,h=void 0===b?Object(o.__)("Change chart type"):b,f=e.isCollapsed,p=void 0===f||f;function d(e){return console.log(e),function(){return n(e)}}var g=Object(l.find)(i,(function(e){return e.type===t})),y=[{icon:_,title:Object(o.__)("Line chart"),isActive:"line"===t,onClick:d("line")},{icon:k,title:Object(o.__)("Bar chart"),isActive:"bar"===t,onClick:d("bar")},{icon:x,title:Object(o.__)("Horizontal bar chart"),isActive:"horizontalBar"===t,onClick:d("horizontalBar")},{icon:E,title:Object(o.__)("Pie chart"),isActive:"pie"===t,onClick:d("pie")}];return Object(a.createElement)(c.ToolbarGroup,{isCollapsed:p,icon:function(){if(g)return g.icon}(),label:u,toggleProps:{describedBy:h},popoverProps:B,controls:y})}var P=Object(s.withInstanceId)((function(e){var t=e.attributes,n=(e.className,e.isSelected,e.setAttributes),r=e.instanceId,s="myChart-".concat(r);n({myChartId:s});var u=function(e){n({type:e})},b=Object(o.__)("Choose Line, Bar, Horizontal bar or Pie.","sb-chart-block"),h={line:Object(o.__)("Line chart","sb-chart-block"),bar:Object(o.__)("Bar chart","sb-chart-block"),horizontalBar:Object(o.__)("Horizontal bar chart","sb-chart-block"),pie:Object(o.__)("Pie chart","sb-chart-block")},f=Object(l.map)(h,(function(e,t){return{value:t,label:e}})),p=Object(l.map)({Gutenberg:"Gutenberg palette",Chart:"Chart",Tertiary:"Chartist or Tertiary",Visualizer:"Visualizer"},(function(e,t){return{value:t,label:e}}));return Object(a.useEffect)((function(){t.content&&(new w).runChart(t)})),Object(a.createElement)(a.Fragment,null,Object(a.createElement)(i.BlockControls,null,Object(a.createElement)(S,{value:t.type,onChange:u}),!1),Object(a.createElement)(i.InspectorControls,null,Object(a.createElement)(c.PanelBody,null,Object(a.createElement)(c.SelectControl,{label:Object(o.__)("Type","sb-chart-block"),value:t.type,onChange:u,options:f,help:b}),Object(a.createElement)(c.PanelRow,null,Object(a.createElement)(c.ToggleControl,{label:Object(o.__)("Stacked","sb-chart-block"),checked:!!t.stacked,onChange:function(e){n({stacked:!t.stacked})}})),Object(a.createElement)(c.PanelRow,null,Object(a.createElement)(c.ToggleControl,{label:Object(o.__)("Begin Y-axis at 0","sb-chart-block"),checked:!!t.beginYAxisAt0,onChange:function(e){n({beginYAxisAt0:!t.beginYAxisAt0})}})),Object(a.createElement)(c.PanelRow,null,Object(a.createElement)(c.ToggleControl,{label:Object(o.__)("Fill","sb-chart-block"),checked:!!t.fill,onChange:function(e){n({fill:!t.fill})}}))),Object(a.createElement)(c.PanelBody,null,Object(a.createElement)(c.SelectControl,{label:Object(o.__)("Theme","sb-chart-block"),value:t.theme,onChange:function(e){n({theme:e})},options:p})),Object(a.createElement)(c.PanelBody,null,Object(a.createElement)(c.PanelRow,null,Object(a.createElement)(c.RangeControl,{label:Object(o.__)("Height (pixels)","sb-chart-block"),value:t.height,initialPosition:450,onChange:function(e){n({height:e})},min:100,max:1e3,allowReset:!0})))),Object(a.createElement)("div",{className:"wp-block-oik-sb-chart"},t.content&&Object(a.createElement)("div",{className:"chartjs",style:{height:t.height}},Object(a.createElement)("canvas",{id:t.myChartId,height:"450px"})),Object(a.createElement)(i.PlainText,{value:t.content,placeholder:Object(o.__)("Enter Chart data in CSV format"),onChange:function(e){e=e.replace(/<br>/g,"\n"),n({content:e})}}),!1))}));Object(r.registerBlockType)("oik-sb/chart",{title:Object(o.__)("Chart","sb-chart-block"),description:Object(o.__)("Displays a chart for CSV content.","sb-chart-block"),category:"widgets",icon:"chart-line",keywords:[Object(o.__)("Chart","sb-chart-block"),Object(o.__)("Line","sb-chart-block"),Object(o.__)("Bar","sb-chart-block"),Object(o.__)("Horizontal bar","sb-chart-block"),Object(o.__)("Pie","sb-chart-block")],supports:{html:!1,align:!1},attributes:{type:{type:"string",default:"line"},content:{type:"string",default:""},theme:{type:"string",default:"Gutenberg"},myChartId:{type:"string",default:"myChart-"},stacked:{type:"boolean",default:!1},fill:{type:"boolean",default:!1},height:{type:"integer",default:null},beginYAxisAt0:{type:"boolean",default:!1}},example:{attributes:{type:"pie",content:Object(o.__)("Label,Value\nOne,1\nTwo,2\nThree,3","sb-chart-block"),myChartId:"myChartExample"}},edit:P,save:function(e){var t=e.attributes;return console.log("Save()"),console.log(t.height),Object(a.createElement)("div",{className:"chartjs",style:{height:t.height}},Object(a.createElement)("canvas",{id:t.myChartId}))}})}]);