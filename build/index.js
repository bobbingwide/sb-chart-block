(window["sb-chart-block"]=window["sb-chart-block"]||[]).push([[1],{13:function(e,t,o){}}]),function(e){function t(t){for(var r,c,a=t[0],i=t[1],s=t[2],b=0,h=[];b<a.length;b++)c=a[b],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&h.push(n[c][0]),n[c]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(u&&u(t);h.length;)h.shift()();return l.push.apply(l,s||[]),o()}function o(){for(var e,t=0;t<l.length;t++){for(var o=l[t],r=!0,a=1;a<o.length;a++){var i=o[a];0!==n[i]&&(r=!1)}r&&(l.splice(t--,1),e=c(c.s=o[0]))}return e}var r={},n={0:0},l=[];function c(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.m=e,c.c=r,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(o,r,function(t){return e[t]}.bind(null,r));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var a=window["sb-chart-block"]=window["sb-chart-block"]||[],i=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var u=i;l.push([19,1]),o()}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=window.lodash},function(e,t){e.exports=window.wp.blockEditor},function(e){e.exports=JSON.parse('{"Chart":[{"color":"#FF6384","slug":"darker-pink"},{"color":"#36A2EB","slug":"bluey"},{"color":"#FFCE56","slug":"goldish"},{"color":"#F78DA7","slug":"pale-pink"},{"color":"#4BC0C0","slug":"turquoise"},{"color":"#9966FF","slug":"purpley"},{"color":"#FF9F40","slug":"goldie"},{"color":"#2271b1"},{"color":"#646970"},{"color":"#d63638"},{"color":"996800"},{"color":"#008a20"}],"Gutenberg":[{"color":"#F78DA7","slug":"pale-pink"},{"color":"#CF2E2E","slug":"vivid-red"},{"color":"#FF6900","slug":"luminous-vivid-orange"},{"color":"#FCB900","slug":"luminous-vivid-amber"},{"color":"#7BDCB5","slug":"light-green-cyan"},{"color":"#00D084","slug":"vivid-green-cyan"},{"color":"#8ED1FC","slug":"pale-cyan-blue"},{"color":"#0693E3","slug":"vivid-cyan-blue"},{"color":"#9B51E0","slug":"vivid-purple"},{"color":"#ABB8C3","slug":"cyan-bluish-gray"},{"color":"#313131","slug":"very-dark-gray"},{"color":"#EEEE00","slug":"yellowish-grey"}],"Visualizer":[{"color":"#3366CC"},{"color":"#DC3912"},{"color":"#FF9900"},{"color":"#109618"},{"color":"#990099"},{"color":"#0099C6"},{"color":"#DD4477"},{"color":"#66AA00"},{"color":"#B82E2E"},{"color":"#316395"},{"color":"#994499"},{"color":"#22AA99"},{"color":"#AAAA11"},{"color":"#6633CC"}],"Tertiary":[{"color":"#F1E70D"},{"color":"#E42426"},{"color":"#2072B2"},{"color":"#FDC70F"},{"color":"#C31A7F"},{"color":"#1D96BB"},{"color":"#F28F1F"},{"color":"#6E398D"},{"color":"#0A905D"},{"color":"#EC6224"},{"color":"#424F9B"},{"color":"#8CBD3F"}],"WordPress":[{"color":"#4f94d4"},{"color":"#8c8f94"},{"color":"#f86368"},{"color":"#dba617"},{"color":"#00ba37"},{"color":"#2271b1"},{"color":"#646970"},{"color":"#d63638"},{"color":"996800"},{"color":"#008a20"},{"color":"#0a4b78"},{"color":"#3c434a"},{"color":"#8a2424"},{"color":"#614200"},{"color":"#005c12"}],"Rainbow":[{"color":"#ee82ee"},{"color":"#4b0082"},{"color":"#0000ff"},{"color":"#008000"},{"color":"#ffff00"},{"color":"#ffa500"},{"color":"#ff0000"}]}')},function(e,t){e.exports=window.wp.primitives},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}},function(e,t){e.exports=window.wp.blocks},function(e,t){e.exports=window.wp.compose},function(e,t,o){var r=o(15),n=o(16),l=o(17),c=o(18);e.exports=function(e){return r(e)||n(e)||l(e)||c()}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function o(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}},,function(e,t,o){},function(e,t,o){var r=o(7);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t,o){var r=o(7);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(e,t):void 0}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,o){"use strict";o.r(t);var r=o(8),n=o(1),l=(o(13),o(0)),c=o(4),a=o(2),i=o(3),s=o(9),u=(o(14),o(10)),b=o.n(u),h=o(11),p=o.n(h),f=o(12),d=o.n(f),g=o(5);function y(e,t){return g[e].map((function(e){return console.log(e.color),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),n=parseInt(e.slice(5,7),16);return"rgba(".concat(o,", ").concat(r,", ").concat(n,", ").concat(t,")")}(e.color,t)}))}function v(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=y(t,o),n=(e-1)%r.length,l=r[n];return l}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}var O=o(3),j=function(){function e(){p()(this,e),console.log("constructor"),this.datasets=[],this.labels=[]}return d()(e,[{key:"setStuff",value:function(e){this.setLines(e.content),this.theme=e.theme,this.attributes=e,console.log(this.attributes)}},{key:"setLines",value:function(e){console.log(e),this.lines=e.split("\n"),console.log(this.lines),this.labels=this.lines.shift(),this.labels=this.labels.split(","),this.asMatrix(this.lines),this.series=this.transpose(this.matrix),console.log(this.series)}},{key:"asMatrix",value:function(e){this.matrix=[];var t,o=function(e,t){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return m(e,void 0);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?m(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,a=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return c=e.done,e},e:function(e){a=!0,l=e},f:function(){try{c||null==o.return||o.return()}finally{if(a)throw l}}}}(e);try{for(o.s();!(t=o.n()).done;){var r=t.value;this.matrix.push(r.split(","))}}catch(e){o.e(e)}finally{o.f()}}},{key:"transpose",value:function(e){return O.zip.apply(O,b()(e))}},{key:"getLegend",value:function(e){return this.labels[e]}},{key:"getDataset",value:function(e){var t=new Object({});return t.label=this.getLegend(e),t.data=this.series[e],"pie"===this.attributes.type?t.backgroundColor=y(this.theme,this.attributes.opacity):(t.backgroundColor=v(e,this.theme,this.attributes.opacity),t.borderColor=function(e,t){return v(e,t,1)}(e,this.theme)),t.borderWidth=1,t.fill=this.attributes.fill,t}},{key:"getDatasets",value:function(){for(var e=[],t=1;t<this.series.length;t++)e.push(this.getDataset(t));return console.log(e),e}},{key:"getLabels",value:function(){return this.series[0]}},{key:"getOptions",value:function(){var e=new Object({});if(e.maintainAspectRatio=!1,"pie"==this.attributes.type)return e;e.scales=new Object({});var t=this.attributes.beginYAxisAt0;return e.scales.y=new Object({beginAtZero:t,stacked:this.attributes.stacked}),this.attributes.stacked&&(e.scales.x=new Object({stacked:!0})),"horizontalBar"===this.attributes.type&&(e.indexAxis="y"),e}},{key:"showChart",value:function(e,t,o,r){var n=null;Chart.helpers.each(Chart.instances,(function(t){t.ctx===e&&(n=t)})),n&&n.destroy(),n=new Chart(e,{type:t,data:o,options:r})}},{key:"runChart",value:function(e){var t=document.getElementById(e.myChartId);if(t){this.setStuff(e),t=t.getContext("2d");var o={labels:this.getLabels(),datasets:this.getDatasets()},r=this.getOptions(),n="horizontalBar"===e.type?"bar":e.type;return this.showChart(t,n,o,r)}}}]),e}(),w=o(6),C=Object(l.createElement)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},Object(l.createElement)(w.Path,{d:"M18 3.5c0 .62-.38 1.16-.92 1.38v13.11H1.99l4.22-6.73c-.13-.23-.21-.48-.21-.76C6 9.67 6.67 9 7.5 9S9 9.67 9 10.5c0 .13-.02.25-.05.37l1.44.63c.27-.3.67-.5 1.11-.5.18 0 .35.04.51.09l3.58-6.41c-.36-.27-.59-.7-.59-1.18 0-.83.67-1.5 1.5-1.5.19 0 .36.04.53.1l.05-.09v.11c.54.22.92.76.92 1.38zm-1.92 13.49V5.85l-3.29 5.89c.13.23.21.48.21.76 0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5l.01-.07-1.63-.72c-.25.18-.55.29-.88.29-.18 0-.35-.04-.51-.1l-3.2 5.09h12.29z"})),k=Object(l.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(l.createElement)(a.Path,{fillRule:"evenodd",d:"m3 18v-11h3v11v0h-3m5 0v-9h3v9h-3m5 0v-13v0h3v13h-3",clipRule:"evenodd"})),_=Object(l.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(l.createElement)(a.Path,{fillRule:"evenodd",d:"M2 3H12V6H2H2V3M2 8H10V11H2V8M2 13H15V16H2V13"})),E=Object(l.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(l.createElement)(a.Path,{d:"M 9.5626743,8.46667 H 18.029337 A 8.4263424,8.4666865 0 0 0 9.6029683,0 8.4263424,8.4666865 0 0 0 9.5626783, 1.0700004e-4 Z M 8.4716429,1.0583348 A 8.4666704,8.4666723 0 0 0 1.4954554e-6, 9.5199618 8.4666704,8.4666723 0 0 0 8.4616259,17.991664 8.4666704,8.4666723 0 0 0 16.933333,9.5299798 a 8.4666704, 8.4666723 0 0 0 -8.7e-5,-0.04049 l -8.4665871,-0.005 z"})),x=[{icon:C,title:Object(n.__)("Line chart"),type:"line"},{icon:k,title:Object(n.__)("Bar chart"),type:"bar"},{icon:_,title:Object(n.__)("Horizontal bar chart","sb-chart-block"),type:"horizontalBar"},{icon:E,title:Object(n.__)("Pie chart"),type:"pie"}],A={position:"bottom right",isAlternate:!0};function B(e){var t=e.value,o=e.onChange,r=e.typeControls,c=void 0===r?x:r,s=e.label,u=void 0===s?Object(n.__)("Chart type"):s,b=e.describedBy,h=void 0===b?Object(n.__)("Change chart type"):b,p=e.isCollapsed,f=void 0===p||p;function d(e){return console.log(e),function(){return o(e)}}var g=Object(i.find)(c,(function(e){return e.type===t})),y=[{icon:C,title:Object(n.__)("Line chart"),isActive:"line"===t,onClick:d("line")},{icon:k,title:Object(n.__)("Bar chart"),isActive:"bar"===t,onClick:d("bar")},{icon:_,title:Object(n.__)("Horizontal bar chart"),isActive:"horizontalBar"===t,onClick:d("horizontalBar")},{icon:E,title:Object(n.__)("Pie chart"),isActive:"pie"===t,onClick:d("pie")}];return Object(l.createElement)(a.ToolbarGroup,{isCollapsed:f,icon:function(){if(g)return g.icon}(),label:u,toggleProps:{describedBy:h},popoverProps:A,controls:y})}var P,S=Object(s.withInstanceId)((function(e){var t=e.attributes,o=(e.className,e.isSelected,e.setAttributes),r=e.instanceId,s="myChart-".concat(r);o({myChartId:s});var u=function(e){o({type:e})},b=Object(n.__)("Choose Line, Bar, Horizontal bar or Pie.","sb-chart-block"),h={line:Object(n.__)("Line chart","sb-chart-block"),bar:Object(n.__)("Bar chart","sb-chart-block"),horizontalBar:Object(n.__)("Horizontal bar chart","sb-chart-block"),pie:Object(n.__)("Pie chart","sb-chart-block")},p=Object.getOwnPropertyNames(g).map((function(e){return{value:e,label:e}})),f=Object(i.map)(h,(function(e,t){return{value:t,label:e}}));return Object(l.useEffect)((function(){t.content&&(new j).runChart(t)})),Object(l.createElement)(l.Fragment,null,Object(l.createElement)(c.BlockControls,null,Object(l.createElement)(B,{value:t.type,onChange:u}),!1),Object(l.createElement)(c.InspectorControls,null,Object(l.createElement)(a.PanelBody,null,Object(l.createElement)(a.SelectControl,{label:Object(n.__)("Type","sb-chart-block"),value:t.type,onChange:u,options:f,help:b}),Object(l.createElement)(a.PanelRow,null,Object(l.createElement)(a.ToggleControl,{label:Object(n.__)("Stacked","sb-chart-block"),checked:!!t.stacked,onChange:function(e){o({stacked:!t.stacked})}})),Object(l.createElement)(a.PanelRow,null,Object(l.createElement)(a.ToggleControl,{label:Object(n.__)("Begin Y-axis at 0","sb-chart-block"),checked:!!t.beginYAxisAt0,onChange:function(e){o({beginYAxisAt0:!t.beginYAxisAt0})}})),Object(l.createElement)(a.PanelRow,null,Object(l.createElement)(a.ToggleControl,{label:Object(n.__)("Fill","sb-chart-block"),checked:!!t.fill,onChange:function(e){o({fill:!t.fill})}}))),Object(l.createElement)(a.PanelBody,null,Object(l.createElement)(a.SelectControl,{label:Object(n.__)("Color palette","sb-chart-block"),value:t.theme,onChange:function(e){o({theme:e})},options:p})),Object(l.createElement)(a.PanelBody,null,Object(l.createElement)(a.PanelRow,null,Object(l.createElement)(a.RangeControl,{label:Object(n.__)("Opacity","sb-chart-block"),value:t.opacity,initialPosition:t.opacity,onChange:function(e){o({opacity:e})},min:0,max:1,step:.1,allowReset:!0}))),Object(l.createElement)(a.PanelBody,null,Object(l.createElement)(a.PanelRow,null,Object(l.createElement)(a.RangeControl,{label:Object(n.__)("Height (pixels)","sb-chart-block"),value:t.height,initialPosition:450,onChange:function(e){o({height:e})},min:100,max:1e3,allowReset:!0})))),Object(l.createElement)("div",{className:"wp-block-oik-sb-chart"},t.content&&Object(l.createElement)("div",{className:"chartjs",style:{height:t.height}},Object(l.createElement)("canvas",{id:t.myChartId,height:"450px"})),Object(l.createElement)(c.PlainText,{value:t.content,placeholder:Object(n.__)("Enter Chart data in CSV format"),onChange:function(e){e=e.replace(/<br>/g,"\n"),o({content:e})}})))}));Object(r.registerBlockType)("oik-sb/chart",{title:Object(n.__)("Chart","sb-chart-block"),description:Object(n.__)("Displays a chart for CSV content.","sb-chart-block"),category:"widgets",icon:"chart-line",keywords:[Object(n.__)("Chart","sb-chart-block"),Object(n.__)("Line","sb-chart-block"),Object(n.__)("Bar","sb-chart-block"),Object(n.__)("Horizontal bar","sb-chart-block"),Object(n.__)("Pie","sb-chart-block")],supports:{html:!1,align:!1},attributes:{type:{type:"string",default:"line"},content:{type:"string",default:""},theme:{type:"string",default:(P=Object.getOwnPropertyNames(g)[0],console.log(P),P)},myChartId:{type:"string",default:"myChart-"},stacked:{type:"boolean",default:!1},fill:{type:"boolean",default:!1},height:{type:"integer",default:null},beginYAxisAt0:{type:"boolean",default:!1},opacity:{type:"number",default:.8}},example:{attributes:{type:"pie",content:Object(n.__)("Label,Value\nOne,1\nTwo,2\nThree,3","sb-chart-block"),myChartId:"myChartExample"}},edit:S,save:function(e){var t=e.attributes;return Object(l.createElement)("div",{className:"chartjs",style:{height:t.height}},Object(l.createElement)("canvas",{id:t.myChartId}))}})}]);